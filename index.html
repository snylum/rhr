<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>3D ASCII Hand + Axes (Right-Hand Rule)</title>
<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: monospace;
  overflow: hidden;
}
#ui {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0,0,0,0.5);
  padding: 10px;
  border-radius: 10px;
  font-size: 13px;
  line-height: 1.4;
  max-width: 240px;
}
input[type=range]{width:100%;}
canvas { width: 100vw; height: 100vh; display: block; }
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="ui">
  <b>3D ASCII Hand + Axes</b><br>
  (Drag: rotate, Scroll: zoom)<br>
  <label>Thumb raise</label><input id="thumbBase" type="range" min="-90" max="90" value="20">
  <label>Thumb curl</label><input id="thumbCurl" type="range" min="0" max="90" value="20">
  <label>Fingers curl</label><input id="curl" type="range" min="0" max="90" value="10">
  <label>Hand RotX</label><input id="rotX" type="range" min="-180" max="180" value="0">
  <label>Hand RotY</label><input id="rotY" type="range" min="-180" max="180" value="0">
  <label>Hand RotZ</label><input id="rotZ" type="range" min="-180" max="180" value="0">
</div>
<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d", {alpha:false});
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
resize();window.addEventListener("resize",resize);
function deg(a){return a*Math.PI/180;}
function rotMatrix(ax,ay,az){
  const sx=Math.sin(ax),cx=Math.cos(ax);
  const sy=Math.sin(ay),cy=Math.cos(ay);
  const sz=Math.sin(az),cz=Math.cos(az);
  return [
    cz*cy, cz*sy*sx - sz*cx, cz*sy*cx + sz*sx,
    sz*cy, sz*sy*sx + cz*cx, sz*sy*cx - cz*sx,
    -sy, cy*sx, cy*cx
  ];
}
function matMulVec(m,v){return[
  m[0]*v[0]+m[1]*v[1]+m[2]*v[2],
  m[3]*v[0]+m[4]*v[1]+m[5]*v[2],
  m[6]*v[0]+m[7]*v[1]+m[8]*v[2]
];}
function project(v){
  const f=400*zoom;
  return [canvas.width/2+v[0]*f/(f+v[2]),canvas.height/2-v[1]*f/(f+v[2])];
}
function chooseChar(dx,dy){
  const a=Math.atan2(dy,dx)*180/Math.PI;
  const A=(a+360)%360;
  if(A<22.5||A>=337.5) return '-';
  if(A<67.5) return '/';
  if(A<112.5) return '|';
  if(A<157.5) return '\\';
  if(A<202.5) return '-';
  if(A<247.5) return '/';
  if(A<292.5) return '|';
  return '\\';
}
function drawLine(a,b,color){
  const ta=matMulVec(R,a),tb=matMulVec(R,b);
  const dx=tb[0]-ta[0],dy=tb[1]-ta[1],dz=tb[2]-ta[2];
  const steps=Math.max(2,Math.round(Math.hypot(dx,dy,dz)*12));
  let p=[ta[0],ta[1],ta[2]],prev=null;
  for(let i=0;i<=steps;i++){
    const t=i/steps;
    const v=[ta[0]+dx*t,ta[1]+dy*t,ta[2]+dz*t];
    const [x,y]=project(v);
    if(prev){
      const ch=chooseChar(x-prev[0],y-prev[1]);
      ctx.fillStyle=color;
      ctx.fillText(ch,x,y);
    }
    prev=[x,y];
  }
}
function drawAxes(){
  drawLine([0,0,0],[3,0,0],'#ff5555'); // X red
  drawLine([0,0,0],[0,3,0],'#55ff55'); // Y green
  drawLine([0,0,0],[0,0,3],'#5599ff'); // Z blue
}
const ui={rotX:rotX,rotY:rotY,rotZ:rotZ,thumbBase:thumbBase,thumbCurl:thumbCurl,curl:curl};
let zoom=1,R;
function drawHand(){
  const tb=+ui.thumbBase.value,tc=+ui.thumbCurl.value,curl=+ui.curl.value;
  function segs(base,len,n,spreadX){
    const pts=[[...base]];
    let p=[...base];let dir=[0,1,0];
    for(let i=0;i<n;i++){
      const ang=-deg(curl*(i+1)/n);
      const Rx=[1,0,0,0,Math.cos(ang),-Math.sin(ang),0,Math.sin(ang),Math.cos(ang)];
      dir=matMulVec(Rx,dir);
      p=[p[0]+dir[0]*len,p[1]+dir[1]*len,p[2]+dir[2]*len];
      pts.push([...p]);
    }
    return pts;
  }
  const bases=[[1.5,0,0],[0.5,0,0],[-0.5,0,0],[-1.5,0,0]];
  const colors=['#ffd','#ffd','#ffd','#ffd'];
  for(let f=0;f<4;f++){
    const pts=segs(bases[f],[0.8,2,0],3,0);
    for(let i=0;i<pts.length-1;i++) drawLine(pts[i],pts[i+1],colors[f]);
  }
  const thumbBase=[2,-0.5,-0.5];
  const thumbLen=[1.2,1.0];
  let p=[...thumbBase];let dir=[1,0,0];
  const yaw=deg(tb);
  const Rz=[Math.cos(yaw),-Math.sin(yaw),0,Math.sin(yaw),Math.cos(yaw),0,0,0,1];
  dir=matMulVec(Rz,dir);
  let a=[p];
  for(let i=0;i<2;i++){
    const ang=-deg(tc*(i+1)/2);
    const Rx=[1,0,0,0,Math.cos(ang),-Math.sin(ang),0,Math.sin(ang),Math.cos(ang)];
    dir=matMulVec(Rx,dir);
    p=[p[0]+dir[0]*thumbLen[i],p[1]+dir[1]*thumbLen[i],p[2]+dir[2]*thumbLen[i]];
    a.push([...p]);
  }
  for(let i=0;i<a.length-1;i++) drawLine(a[i],a[i+1],'#afa');
}
let dragging=false,lx=0,ly=0;
canvas.addEventListener("mousedown",e=>{dragging=true;lx=e.clientX;ly=e.clientY;});
window.addEventListener("mouseup",()=>dragging=false);
canvas.addEventListener("mousemove",e=>{
  if(!dragging)return;
  const dx=e.clientX-lx,dy=e.clientY-ly;lx=e.clientX;ly=e.clientY;
  ui.rotY.value=+ui.rotY.value+dx*0.4;
  ui.rotX.value=+ui.rotX.value+dy*0.4;
});
canvas.addEventListener("wheel",e=>{zoom*=(e.deltaY>0?0.9:1.1);e.preventDefault();},{passive:false});
function loop(){
  ctx.fillStyle="#000";ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.font="16px monospace";
  R=rotMatrix(deg(+ui.rotX.value),deg(+ui.rotY.value),deg(+ui.rotZ.value));
  drawAxes();
  drawHand();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
