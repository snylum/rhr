<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII 3D Interactive Visualization</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #0a0a0a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            user-select: none;
        }
        #container {
            display: flex;
            gap: 40px;
            height: 90vh;
            max-width: 100vw;
            overflow: hidden;
        }
        #plane-container, #hand-container {
            flex: 1;
            min-width: 0;
            max-width: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            background: rgba(0, 20, 0, 0.3);
            overflow: hidden;
        }
        #ascii-plane, #ascii-hand {
            font-size: 14px;
            line-height: 1.1;
            white-space: pre;
            cursor: move;
            text-shadow: 0 0 8px #00ff00;
            letter-spacing: 2px;
        }
        .controls {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 11px;
            color: #00ff00;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #00ff00;
            z-index: 10;
        }
        .hand-controls, .arrow-controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 11px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #00ff00;
        }
        .arrow-controls {
            left: auto;
            right: 10px;
            width: 200px;
        }
        button {
            background: #003300;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 5px 10px;
            margin: 2px;
            cursor: pointer;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 10px;
        }
        button:hover {
            background: #005500;
        }
        button:active {
            background: #007700;
        }
        h3 {
            margin: 0 0 10px 0;
            font-size: 13px;
        }
        input[type="number"] {
            width: 50px;
            background: #001100;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 3px;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            border-radius: 3px;
        }
        label {
            font-size: 10px;
            margin-right: 5px;
        }
        .input-group {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="plane-container">
            <div class="controls">
                <h3>XYZ COORDINATE PLANE</h3>
                Drag to rotate<br>
                Rotation: <span id="plane-rotation">0°, 0°</span>
            </div>
            <div class="arrow-controls">
                <h3>VECTORS (Right Hand Rule)</h3>
                <div class="input-group">
                    <label>i:</label><input type="number" id="vec-i" value="5" step="1">
                    <label>j:</label><input type="number" id="vec-j" value="5" step="1">
                </div>
                <div class="input-group">
                    <label>k:</label><input type="number" id="vec-k" value="5" step="1">
                </div>
                <button onclick="addVector()">Add Vector</button>
                <button onclick="clearVectors()">Clear All</button>
                <button onclick="resetPlaneView()">Reset View</button>
            </div>
            <div id="ascii-plane"></div>
        </div>
        
        <div id="hand-container">
            <div class="controls">
                <h3>ASCII HAND</h3>
                Drag to rotate<br>
                Rotation: <span id="hand-rotation">0°, 0°</span>
            </div>
            <div class="hand-controls">
                <button onclick="toggleThumb()">Thumb Up/Down</button><br>
                <button onclick="setFingers('fist')">Fist</button>
                <button onclick="setFingers('open')">Open Hand</button><br>
                <button onclick="setFingers('point')">Point</button>
                <button onclick="setFingers('peace')">Peace</button><br>
                <button onclick="resetHandView()">Reset View</button>
            </div>
            <div id="ascii-hand"></div>
        </div>
    </div>

    <script>
        let planeRotX = 0.3, planeRotY = 0.5;
        let planeDragging = false;
        let planeLastX = 0, planeLastY = 0;

        let handRotX = 0.2, handRotY = -0.3;
        let handDragging = false;
        let handLastX = 0, handLastY = 0;

        let thumbUp = true;
        let fingerStates = [1, 1, 1, 1, 1]; // 0=curled, 1=extended (thumb, index, middle, ring, pinky)
        
        let vectors = [];

        function rotate3D(x, y, z, rotX, rotY) {
            let cosY = Math.cos(rotY);
            let sinY = Math.sin(rotY);
            let xr = x * cosY - z * sinY;
            let zr = x * sinY + z * cosY;
            x = xr;
            z = zr;
            
            let cosX = Math.cos(rotX);
            let sinX = Math.sin(rotX);
            let yr = y * cosX - z * sinX;
            zr = y * sinX + z * cosX;
            
            return {x, y: yr, z: zr};
        }

        function project(x, y, z, scale = 200) {
            let perspective = scale / (scale + z);
            return {
                x: Math.round(x * perspective),
                y: Math.round(y * perspective),
                z: z
            };
        }

        function generate3DPlane(rotX, rotY) {
            let points = [];
            let size = 15;
            
            // Axes
            for (let i = -size; i <= size; i++) {
                points.push({x: i, y: 0, z: 0, char: '─', color: 1}); // X axis
                points.push({x: 0, y: i, z: 0, char: '│', color: 2}); // Y axis
                points.push({x: 0, y: 0, z: i, char: '/', color: 3}); // Z axis
            }
            
            // Grid lines on XY plane
            for (let i = -size; i <= size; i += 5) {
                for (let j = -size; j <= size; j++) {
                    if (i !== 0 && j !== 0) {
                        points.push({x: i, y: j, z: 0, char: '·', color: 0});
                        points.push({x: j, y: i, z: 0, char: '·', color: 0});
                    }
                }
            }

            // Origin
            points.push({x: 0, y: 0, z: 0, char: '⊕', color: 4});

            // Add vectors with smooth lines
            vectors.forEach((vec, idx) => {
                let steps = Math.max(Math.abs(vec.i), Math.abs(vec.j), Math.abs(vec.k)) * 3;
                let prevProj = null;
                
                for (let s = 0; s <= steps; s++) {
                    let t = s / steps;
                    let x = vec.i * t;
                    let y = vec.j * t;
                    let z = vec.k * t;
                    
                    let rot = rotate3D(x, y, z, rotX, rotY);
                    let proj = project(rot.x, rot.y, rot.z);
                    
                    if (prevProj) {
                        // Draw line between previous and current point
                        let dx = proj.x - prevProj.x;
                        let dy = proj.y - prevProj.y;
                        let dist = Math.sqrt(dx * dx + dy * dy);
                        let lineSteps = Math.ceil(dist);
                        
                        for (let l = 0; l <= lineSteps; l++) {
                            let lt = l / lineSteps;
                            let lx = prevProj.x + dx * lt;
                            let ly = prevProj.y + dy * lt;
                            let lz = prevProj.z + (proj.z - prevProj.z) * lt;
                            
                            points.push({
                                x: lx + 60,
                                y: ly + 30,
                                z: lz,
                                char: '█',
                                color: 5
                            });
                        }
                    }
                    
                    prevProj = proj;
                }
                
                // Arrowhead at the end
                let rot = rotate3D(vec.i, vec.j, vec.k, rotX, rotY);
                let proj = project(rot.x, rot.y, rot.z);
                points.push({
                    x: proj.x + 60,
                    y: proj.y + 30,
                    z: proj.z,
                    char: '►',
                    color: 5
                });
            });

            // Transform points
            let projected = points.map(p => {
                let rot = rotate3D(p.x, p.y, p.z, rotX, rotY);
                let proj = project(rot.x, rot.y, rot.z);
                return {
                    x: proj.x + 60,
                    y: proj.y + 30,
                    z: proj.z,
                    char: p.char,
                    color: p.color
                };
            });

            projected.sort((a, b) => a.z - b.z);

            let canvas = Array(60).fill(null).map(() => Array(120).fill(' '));
            projected.forEach(p => {
                if (p.x >= 0 && p.x < 120 && p.y >= 0 && p.y < 60) {
                    canvas[p.y][p.x] = p.char;
                }
            });

            return canvas.map(row => row.join('')).join('\n');
        }

        function generateHand(rotX, rotY) {
            let points = [];
            
            // Palm - thicker 3D palm with depth
            for (let y = 5; y < 14; y++) {
                for (let x = -4; x <= 4; x++) {
                    for (let z = -1; z <= 1; z++) {
                        if (Math.abs(x) <= 4 - Math.abs(y - 9) * 0.3) {
                            points.push({x, y, z, char: '█'});
                        }
                    }
                }
            }

            // Thumb - with 3D depth
            if (fingerStates[0]) {
                // Thumb up (perpendicular)
                for (let i = 0; i < 6; i++) {
                    for (let z = -1; z <= 1; z++) {
                        points.push({x: -5 - i * 0.3, y: 8 - i, z, char: '█'});
                    }
                }
            } else {
                // Thumb curled
                for (let i = 0; i < 3; i++) {
                    for (let z = -1; z <= 1; z++) {
                        points.push({x: -4, y: 7 + i, z, char: '█'});
                    }
                }
            }

            // Fingers - with 3D volume
            let fingerX = [-2, 0, 2, 4];
            for (let f = 0; f < 4; f++) {
                let fx = fingerX[f];
                let extended = fingerStates[f + 1];
                
                if (extended) {
                    // Extended finger with thickness
                    for (let i = 0; i < 8; i++) {
                        for (let dx = -0.5; dx <= 0.5; dx++) {
                            for (let z = -0.5; z <= 0.5; z++) {
                                points.push({x: fx + dx, y: 4 - i, z, char: '█'});
                            }
                        }
                    }
                    // Fingertip
                    points.push({x: fx, y: -4, z: 0, char: '▀'});
                } else {
                    // Curled finger with volume
                    for (let i = 0; i < 3; i++) {
                        for (let dx = -0.5; dx <= 0.5; dx++) {
                            for (let z = -0.5; z <= 0.5; z++) {
                                points.push({x: fx + dx, y: 4 - i, z, char: '█'});
                            }
                        }
                    }
                }
            }

            // Wrist - with 3D depth
            for (let y = 14; y < 19; y++) {
                for (let x = -3; x <= 3; x++) {
                    for (let z = -1; z <= 1; z++) {
                        points.push({x, y, z, char: '▓'});
                    }
                }
            }

            // Transform
            let projected = points.map(p => {
                let rot = rotate3D(p.x, p.y - 10, p.z, rotX, rotY);
                let proj = project(rot.x, rot.y, rot.z, 150);
                return {
                    x: proj.x + 60,
                    y: proj.y + 30,
                    z: proj.z,
                    char: p.char
                };
            });

            projected.sort((a, b) => a.z - b.z);

            let canvas = Array(60).fill(null).map(() => Array(120).fill(' '));
            projected.forEach(p => {
                if (p.x >= 0 && p.x < 120 && p.y >= 0 && p.y < 60) {
                    canvas[p.y][p.x] = p.char;
                }
            });

            return canvas.map(row => row.join('')).join('\n');
        }

        function updatePlane() {
            document.getElementById('ascii-plane').textContent = generate3DPlane(planeRotX, planeRotY);
            document.getElementById('plane-rotation').textContent = 
                `${Math.round(planeRotX * 180 / Math.PI)}°, ${Math.round(planeRotY * 180 / Math.PI)}°`;
        }

        function updateHand() {
            document.getElementById('ascii-hand').textContent = generateHand(handRotX, handRotY);
            document.getElementById('hand-rotation').textContent = 
                `${Math.round(handRotX * 180 / Math.PI)}°, ${Math.round(handRotY * 180 / Math.PI)}°`;
        }

        function toggleThumb() {
            fingerStates[0] = 1 - fingerStates[0];
            updateHand();
        }

        function setFingers(pose) {
            switch(pose) {
                case 'fist':
                    fingerStates = [0, 0, 0, 0, 0];
                    break;
                case 'open':
                    fingerStates = [1, 1, 1, 1, 1];
                    break;
                case 'point':
                    fingerStates = [1, 1, 0, 0, 0];
                    break;
                case 'peace':
                    fingerStates = [0, 1, 1, 0, 0];
                    break;
            }
            updateHand();
        }

        function addVector() {
            let i = parseFloat(document.getElementById('vec-i').value);
            let j = parseFloat(document.getElementById('vec-j').value);
            let k = parseFloat(document.getElementById('vec-k').value);
            vectors.push({i, j, k});
            updatePlane();
        }

        function clearVectors() {
            vectors = [];
            updatePlane();
        }

        function resetPlaneView() {
            planeRotX = 0.3;
            planeRotY = 0.5;
            updatePlane();
        }

        function resetHandView() {
            handRotX = 0.2;
            handRotY = -0.3;
            updateHand();
        }

        let planeEl = document.getElementById('ascii-plane');
        planeEl.addEventListener('mousedown', (e) => {
            planeDragging = true;
            planeLastX = e.clientX;
            planeLastY = e.clientY;
        });

        let handEl = document.getElementById('ascii-hand');
        handEl.addEventListener('mousedown', (e) => {
            handDragging = true;
            handLastX = e.clientX;
            handLastY = e.clientY;
        });

        document.addEventListener('mousemove', (e) => {
            if (planeDragging) {
                let dx = e.clientX - planeLastX;
                let dy = e.clientY - planeLastY;
                planeRotY += dx * 0.01;
                planeRotX += dy * 0.01;
                planeLastX = e.clientX;
                planeLastY = e.clientY;
                updatePlane();
            }
            if (handDragging) {
                let dx = e.clientX - handLastX;
                let dy = e.clientY - handLastY;
                handRotY += dx * 0.01;
                handRotX += dy * 0.01;
                handLastX = e.clientX;
                handLastY = e.clientY;
                updateHand();
            }
        });

        document.addEventListener('mouseup', () => {
            planeDragging = false;
            handDragging = false;
        });

        updatePlane();
        updateHand();
    </script>
</body>
</html>
